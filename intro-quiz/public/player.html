<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>早押し</title>
</head>
<body>

<h2>名前</h2>
<input id="name" placeholder="名前を入力">

<br><br>

<button id="buzz">早押し！</button>

<script>
const ws = new WebSocket("wss://intro-quiz.onrender.com");
let locked = false;

document.getElementById("buzz").onclick = () => {
  if (locked) return;

  const name = document.getElementById("name").value.trim();
  if (!name) {
    alert("名前を入力してください");
    return;
  }

  ws.send(JSON.stringify({
    type: "buzz",
    name
  }));

  locked = true;
};

ws.onmessage = (e) => {
  const data = JSON.parse(e.data);
  if (data.type === "reset") {
    locked = false;
  }
};
</script>

</body>
</html>
