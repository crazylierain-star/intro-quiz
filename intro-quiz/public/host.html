<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>司会者</title>
</head>
<body>

<h1>イントロクイズ（司会）</h1>

<h2 id="status">待機中</h2>

<button onclick="resume()">▶ 再生再開</button>
<button onclick="next()">⏭ 次の曲</button>

<script>
const ws = new WebSocket("wss://intro-quiz.onrender.com");

ws.onmessage = (e) => {
  const data = JSON.parse(e.data);

  if (data.type === "buzz") {
    document.getElementById("status").textContent =
      `押した人：${data.name}`;
  }

  if (data.type === "reset") {
    document.getElementById("status").textContent = "待機中";
  }
};

function resume() {
  // Chrome拡張が Media 再生キーを拾う
  navigator.mediaSession?.play?.();
}

function next() {
  ws.send(JSON.stringify({ type: "reset" }));
}
</script>

</body>
</html>
