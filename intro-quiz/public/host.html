<!DOCTYPE html>
<html>
<body>
<h1>司会者</h1>
<div id="result"></div>
<button id="resume">再開</button>

<script>
const sessionId =
  new URLSearchParams(location.search).get("sessionId");

const ws = new WebSocket(
  (location.protocol === "https:" ? "wss://" : "ws://")
  + location.host
);

ws.onmessage = e => {
  const d = JSON.parse(e.data);
  if (d.type === "buzzed") {
    result.textContent = `${d.winner} さんが押しました`;
  }
};

resume.onclick = () => {
  ws.send(JSON.stringify({
    type: "resume",
    sessionId
  }));
};
</script>
</body>
</html>
